language: cpp

jobs:
  include:
    - os: linux
      name: "gcc"
      dist: bionic
      compiler:
        - gcc
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-10
      env: 
        - CC=gcc-10
        - CXX=g++-10
    - os: linux
      name: "clang"
      dist: bionic
      compiler:
        - clang
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - clang-10
            - g++-10
      env: 
        - CC=clang-10
        - CXX=clang++-10

before_script:
    - sudo apt-get install
install:
    - wget -qO - https://packages.lunarg.com/lunarg-signing-key-pub.asc | sudo apt-key add -
    - sudo wget -qO /etc/apt/sources.list.d/lunarg-vulkan-1.2.148-bionic.list https://packages.lunarg.com/vulkan/1.2.148/lunarg-vulkan-1.2.148-bionic.list
    - sudo apt-get update
    - sudo apt-get install cmake libgl1-mesa-dev xorg-dev vulkan-sdk
script:
    - mkdir build
    - cd build
    - cmake ../ -DCOMPILE_UNIT_TESTS=ON
    - make
    - EngineTests/EngineTests
    
notifications:
  email:
    on_success: change
    on_failure: change